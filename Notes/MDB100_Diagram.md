# MDB100 Key Concepts Diagram

## MongoDB Architecture Overview

```
┌─────────────────────────────────────────────────┐
│                  Client Applications            │
└───────────────────────┬─────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────┐
│               MongoDB Query Layer               │
│  ┌─────────┐  ┌─────────┐  ┌─────────────────┐  │
│  │  CRUD   │  │ Aggre-  │  │ Text Search/    │  │
│  │ Ops     │  │ gation  │  │ Geospatial/etc. │  │
│  └─────────┘  └─────────┘  └─────────────────┘  │
└───────────────────────┬─────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────┐
│              Storage Layer (WiredTiger)         │
│  ┌─────────┐  ┌─────────┐  ┌─────────────────┐  │
│  │Document │  │ Index   │  │ Transaction     │  │
│  │ Storage │  │ Storage │  │ Management      │  │
│  └─────────┘  └─────────┘  └─────────────────┘  │
└───────────────────────┬─────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────┐
│                Storage Devices                  │
└─────────────────────────────────────────────────┘
```

## Document Model vs Relational Model

```
┌─────────────────────────────┐   ┌─────────────────────────────┐
│    Relational Database      │   │      MongoDB Document        │
├─────────────────────────────┤   ├─────────────────────────────┤
│ ┌─────────────────────────┐ │   │ ┌─────────────────────────┐ │
│ │      USERS TABLE        │ │   │ │      users collection   │ │
│ ├─────┬──────┬────────────┤ │   │ │                         │ │
│ │ ID  │ NAME │ EMAIL      │ │   │ │ {                       │ │
│ ├─────┼──────┼────────────┤ │   │ │   "_id": 1,             │ │
│ │ 1   │ John │john@ex.com │ │   │ │   "name": "John",       │ │
│ ├─────┼──────┼────────────┤ │   │ │   "email": "john@ex.com"│ │
│ │ 2   │ Jane │jane@ex.com │ │   │ │ },                      │ │
│ └─────┴──────┴────────────┘ │   │ │ {                       │ │
│                             │   │ │   "_id": 2,             │ │
│ ┌─────────────────────────┐ │   │ │   "name": "Jane",       │ │
│ │    ADDRESSES TABLE      │ │   │ │   "email": "jane@ex.com"│ │
│ ├─────┬──────┬────────────┤ │   │ │   "address": {          │ │
│ │ ID  │ USER │ STREET     │ │   │ │     "street": "123 Main"│ │
│ ├─────┼──────┼────────────┤ │   │ │     "city": "Anytown"   │ │
│ │ 1   │ 1    │123 Main St │ │   │ │   },                    │ │
│ └─────┴──────┴────────────┘ │   │ │   "orders": [           │ │
│                             │   │ │     { "id": "A1", ... } │ │
│ ┌─────────────────────────┐ │   │ │   ]                     │ │
│ │     ORDERS TABLE        │ │   │ │ }                       │ │
│ ├─────┬──────┬────────────┤ │   │ └─────────────────────────┘ │
│ │ ID  │ USER │ PRODUCT    │ │   │                             │
│ ├─────┼──────┼────────────┤ │   │   ↑                         │
│ │ A1  │ 2    │ Book       │ │   │ Embedded documents & arrays │
│ └─────┴──────┴────────────┘ │   │   support rich data models  │
└─────────────────────────────┘   └─────────────────────────────┘
    ↑ Joins required to            ↑ Related data stored 
  connect related data             together in one document
```

## MongoDB Atlas Architecture

```
┌─────────────────────────────────────────────────────────┐
│                     Client Applications                  │
└───────────────────────────┬─────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────┐
│                        MongoDB Atlas                     │
│                                                         │
│  ┌─────────────────┐   ┌─────────────────────────────┐  │
│  │  Atlas Services │   │     Database Deployments    │  │
│  │                 │   │ ┌─────────┐ ┌─────────────┐ │  │
│  │ • Data Explorer │   │ │ Replica │ │   Sharded   │ │  │
│  │ • Performance   │   │ │  Sets   │ │   Clusters  │ │  │
│  │   Advisor       │   │ └─────────┘ └─────────────┘ │  │
│  │ • Charts        │   │                             │  │
│  │ • Data Lake     │   │ ┌─────────────────────────┐ │  │
│  │ • Realm/App     │   │ │    Atlas Search &       │ │  │
│  │   Services      │   │ │   Vector Search Nodes   │ │  │
│  └─────────────────┘   │ └─────────────────────────┘ │  │
│                        └─────────────────────────────┘  │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │             Security Services                   │   │
│  │ • Network Isolation  • Encryption at Rest       │   │
│  │ • RBAC              • Field-Level Encryption    │   │
│  │ • Auditing          • VPC Peering               │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────┬─────────────────────┬─────────────────┐
│      AWS        │        Azure        │       GCP       │
└─────────────────┴─────────────────────┴─────────────────┘
```

## MongoDB Data Flow for CRUD Operations

```
┌──────────────┐    ┌───────────────┐    ┌────────────────┐
│ Application  │    │ MongoDB Query │    │ Storage Engine │
│              │    │ Processing    │    │ (WiredTiger)   │
│              │    │               │    │                │
│  Operation:  │    │ Stages:       │    │ Components:    │
│ ┌──────────┐ │    │ ┌───────────┐ │    │ ┌────────────┐ │
│ │ INSERT   │─┼───►│ │Query      │─┼───►│ │Document    │ │
│ └──────────┘ │    │ │Parsing    │ │    │ │Collection  │ │
│              │    │ └───────────┘ │    │ └────────────┘ │
│ ┌──────────┐ │    │       │      │    │        ▲       │
│ │ FIND     │─┼───►│       ▼      │    │        │       │
│ └──────────┘ │    │ ┌───────────┐ │    │ ┌────────────┐ │
│              │    │ │Index      │ │    │ │Index       │ │
│ ┌──────────┐ │    │ │Selection  │─┼───►│ │B-tree      │ │
│ │ UPDATE   │─┼───►│ └───────────┘ │    │ └────────────┘ │
│ └──────────┘ │    │       │      │    │        │       │
│              │    │       ▼      │    │        ▼       │
│ ┌──────────┐ │    │ ┌───────────┐ │    │ ┌────────────┐ │
│ │ DELETE   │─┼───►│ │Execution  │─┼───►│ │Storage     │ │
│ └──────────┘ │    │ │           │ │    │ │            │ │
└──────────────┘    └───────────────┘    └────────────────┘
``` 